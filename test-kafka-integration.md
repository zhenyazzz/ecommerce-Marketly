# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ User Service ‚Üî Cart Service —á–µ—Ä–µ–∑ Kafka

## üéØ –ß—Ç–æ –º—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏:

1. **User Service** ‚Üí —Å–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `UserCreatedEvent`
2. **Cart Service** ‚Üí –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ ‚Üí —Å–æ–∑–¥–∞–µ—Ç –∫–æ—Ä–∑–∏–Ω—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üìã –®–∞–≥–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å Kafka
docker-compose up -d kafka

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Eureka Server
# –ó–∞–ø—É—Å—Ç–∏—Ç—å User Service
# –ó–∞–ø—É—Å—Ç–∏—Ç—å Cart Service
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```bash
curl -X POST http://localhost:8080/api/users \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "email": "test@example.com",
    "firstName": "Test",
    "lastName": "User",
    "phone": "+1234567890",
    "roles": ["USER"]
  }'
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
curl -X GET http://localhost:8080/api/carts \
  -H "X-User-Id: 1"
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:
```bash
# –í –ª–æ–≥–∞—Ö User Service –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
"Sending UserCreatedEvent to topic user-created: UserCreatedEvent(userId=1, username=testuser, email=test@example.com)"

# –í –ª–æ–≥–∞—Ö Cart Service –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
"Received UserCreatedEvent: UserCreatedEvent(userId=1, username=testuser, email=test@example.com)"
"Created cart for user: 1"
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Redis:
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Redis
redis-cli

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—É—é –∫–æ—Ä–∑–∏–Ω—É
KEYS *cart*
GET carts:1
```

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **Kafka –Ω–µ –∑–∞–ø—É—â–µ–Ω** ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å docker-compose
2. **–¢–æ–ø–∏–∫ –Ω–µ —Å–æ–∑–¥–∞–Ω** ‚Üí Kafka —Å–æ–∑–¥–∞—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. **–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è** ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –≤ —Å–æ–±—ã—Ç–∏—è—Ö
4. **–°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã** ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

## üéâ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ User Service –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ—Ä–∑–∏–Ω–∞ –≤ Cart Service! 